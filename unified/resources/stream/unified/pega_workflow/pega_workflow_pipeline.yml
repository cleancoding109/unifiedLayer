# Multi-target Pega Workflow Pipeline - demonstrates one pipeline writing to multiple streaming tables
resources:
  pipelines:
    pega_workflow_pipeline:
      name: pega_workflow_multi_target_pipeline
      catalog: ${var.catalog}
      schema: ${var.schema}
      serverless: true
      libraries:
        - notebook:
            path: ../../../../src/pipeline.py

      configuration:
        bundle.sourcePath: ${workspace.file_path}/src
        # Pass variables to pipeline for use in code
        pipeline.catalog: ${var.catalog}
        pipeline.schema: ${var.schema}
        pipeline.source_catalog: ${var.source_catalog}
        pipeline.source_schema: ${var.source_schema}
        # Relative path to metadata JSON from src/metadata folder
        pipeline.metadata_path: stream/unified/pega_workflow/pega_workflow_pipeline.json
