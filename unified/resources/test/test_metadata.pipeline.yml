resources:
  pipelines:
    test_metadata_structure_pipeline:
      name: "test_metadata_structure_pipeline"
      catalog: ${var.catalog}
      target: ${var.schema}
      development: true
      channel: "PREVIEW"
      photon: true
      serverless: true
      libraries:
        - notebook:
            path: ../../src/test_pipeline.py
      configuration:
        # Pipeline-specific configuration passed to notebooks via spark.conf
        pipeline.catalog: ${var.catalog}
        pipeline.schema: ${var.schema}
        pipeline.source_catalog: ${var.source_catalog}
        pipeline.source_schema: ${var.source_schema}
        # NEW: metadata_path points to the test metadata JSON
        pipeline.metadata_path: "test/test_pipeline.json"
        # Bundle source path for file resolution
        bundle.sourcePath: "/Workspace/Shared/.bundle/${bundle.name}/${bundle.target}/files/src"
